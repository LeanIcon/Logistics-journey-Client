<template>
  <section class="highest-width bg-white min-h-screen flex items-center justify-center p-0 px-4 lg:px-24 md:py-24">
    <div class="w-full px-4 xs:px-6 lg:px-10 py-16 bg-[#E9EFFD] gap-4 lg:gap-10 md:flex md:rounded-2xl overflow-hidden">
      <!-- Left Section -->
      <div class="hidden md:flex bg-[#225AD6] text-white md:w-2/5 px-6 py-10 lg:p-10 flex-col justify-between rounded-2xl relative">
        <div>
          <h2 class="text-2xl md:text-3xl font-medium mb-4">Request a Demo</h2>
          <p class="text-sm md:text-base mb-8 opacity-90" style="color: white;">
            Get a personal walkthrough of Logistics journey with one of our product experts
          </p>

          <ul class="space-y-6">
            <li class="flex items-center space-x-4">
              <div class="">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="40" height="40" rx="20" fill="#F8FAFC" fill-opacity="0.5"/>
                <path d="M19.2087 22.4583L17.667 24C17.342 24.325 16.8253 24.325 16.492 24.0083C16.4003 23.9167 16.3087 23.8333 16.217 23.7417C15.3587 22.875 14.5837 21.9667 13.892 21.0167C13.2087 20.0667 12.6587 19.1167 12.2587 18.175C11.867 17.225 11.667 16.3167 11.667 15.45C11.667 14.8833 11.767 14.3417 11.967 13.8417C12.167 13.3333 12.4837 12.8667 12.9253 12.45C13.4587 11.925 14.042 11.6667 14.6587 11.6667C14.892 11.6667 15.1253 11.7167 15.3337 11.8167C15.5503 11.9167 15.742 12.0667 15.892 12.2833L17.8253 15.0083C17.9753 15.2167 18.0837 15.4083 18.1587 15.5917C18.2337 15.7667 18.2753 15.9417 18.2753 16.1C18.2753 16.3 18.217 16.5 18.1003 16.6917C17.992 16.8833 17.8337 17.0833 17.6337 17.2833L17.0003 17.9417C16.9087 18.0333 16.867 18.1417 16.867 18.275C16.867 18.3417 16.8753 18.4 16.892 18.4667C16.917 18.5333 16.942 18.5833 16.9587 18.6333C17.1087 18.9083 17.367 19.2667 17.7337 19.7C18.1087 20.1333 18.5087 20.575 18.942 21.0167C19.0253 21.1 19.117 21.1833 19.2003 21.2667C19.5337 21.5917 19.542 22.125 19.2087 22.4583Z" fill="white"/>
                <path d="M28.3083 25.275C28.3083 25.5083 28.2667 25.75 28.1833 25.9833C28.1583 26.05 28.1333 26.1167 28.1 26.1833C27.9583 26.4833 27.775 26.7667 27.5333 27.0333C27.125 27.4833 26.675 27.8083 26.1667 28.0167C26.1583 28.0167 26.15 28.025 26.1417 28.025C25.65 28.225 25.1167 28.3333 24.5417 28.3333C23.6917 28.3333 22.7833 28.1333 21.825 27.725C20.8667 27.3167 19.9083 26.7667 18.9583 26.075C18.6333 25.8333 18.3083 25.5917 18 25.3333L20.725 22.6083C20.9583 22.7833 21.1667 22.9167 21.3417 23.0083C21.3833 23.025 21.4333 23.05 21.4917 23.075C21.5583 23.1 21.625 23.1083 21.7 23.1083C21.8417 23.1083 21.95 23.0583 22.0417 22.9667L22.675 22.3417C22.8833 22.1333 23.0833 21.975 23.275 21.875C23.4667 21.7583 23.6583 21.7 23.8667 21.7C24.025 21.7 24.1917 21.7333 24.375 21.8083C24.5583 21.8833 24.75 21.9917 24.9583 22.1333L27.7167 24.0917C27.9333 24.2417 28.0833 24.4167 28.175 24.625C28.2583 24.8333 28.3083 25.0417 28.3083 25.275Z" fill="white"/>
                </svg>
              </div>
              <a href="tel:+27115687109" class="underline text-white text-sm md:text-lg" style="font-size: large; text-decoration: underline;">
                +27 11 568 7109
              </a>
            </li>

            <li class="flex items-center space-x-4">
              <div class="">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="40" height="40" rx="20" fill="#F8FAFC" fill-opacity="0.5"/>
                <path d="M24.167 12.9167H15.8337C13.3337 12.9167 11.667 14.1667 11.667 17.0833V22.9167C11.667 25.8333 13.3337 27.0833 15.8337 27.0833H24.167C26.667 27.0833 28.3337 25.8333 28.3337 22.9167V17.0833C28.3337 14.1667 26.667 12.9167 24.167 12.9167ZM24.5587 17.9917L21.9503 20.075C21.4003 20.5167 20.7003 20.7333 20.0003 20.7333C19.3003 20.7333 18.592 20.5167 18.0503 20.075L15.442 17.9917C15.1753 17.775 15.1337 17.375 15.342 17.1083C15.5587 16.8417 15.9503 16.7917 16.217 17.0083L18.8253 19.0917C19.4587 19.6 20.5337 19.6 21.167 19.0917L23.7753 17.0083C24.042 16.7917 24.442 16.8333 24.6503 17.1083C24.867 17.375 24.8253 17.775 24.5587 17.9917Z" fill="white"/>
                </svg>
              </div>
              <a href="mailto:support@logisticjourney.com" class="underline text-white text-sm md:text-base" style="font-size: medium; text-decoration: underline;">
                support@logisticjourney.com
              </a>
            </li>

            <li class="flex items-start space-x-4">
              <div class=" mt-1">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="40" height="40" rx="20" fill="#F8FAFC" fill-opacity="0.5"/>
                <path d="M20 9.99995C14.4863 9.99995 10.0001 13.589 10.0001 17.995C9.96385 24.44 19.62 29.784 20 30C20 30 30.0362 24.44 29.9999 18C29.9999 13.589 25.5137 9.99995 20 9.99995ZM20 22C17.2375 22 15.0001 20.21 15.0001 18C15.0001 15.79 17.2375 14 20 14C22.7625 14 25 15.79 25 18C25 20.21 22.7625 22 20 22Z" fill="white"/>
                </svg>
              </div>
              <p class="text-sm md:text-base leading-relaxed opacity-90" style="color: white;">
                The Workshop, Unit 7<br />
                70 Seventh Avenue<br />
                Parktown North, Johannesburg<br />
                Gauteng, South Africa
              </p>
            </li>
          </ul>
        </div>

        <div class="flex space-x-4 mt-8">
          <a href="#" class="">
            <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="40" height="40" rx="20" fill="#F8FAFC" fill-opacity="0.5"/>
            <path d="M28.3337 23.4917C28.3337 26.525 26.5253 28.3334 23.492 28.3334H22.5003C22.042 28.3334 21.667 27.9584 21.667 27.5V22.6917C21.667 22.4667 21.8503 22.275 22.0753 22.275L23.542 22.25C23.6587 22.2417 23.7587 22.1584 23.7837 22.0417L24.0753 20.45C24.1003 20.3 23.9837 20.1584 23.8253 20.1584L22.0503 20.1834C21.817 20.1834 21.6337 20 21.6253 19.775L21.592 17.7334C21.592 17.6 21.7003 17.4834 21.842 17.4834L23.842 17.45C23.9836 17.45 24.092 17.3417 24.092 17.2L24.0587 15.2C24.0587 15.0583 23.9503 14.95 23.8087 14.95L21.5587 14.9834C20.1753 15.0084 19.0753 16.1417 19.1003 17.525L19.142 19.8167C19.1503 20.05 18.967 20.2334 18.7337 20.2417L17.7337 20.2584C17.592 20.2584 17.4837 20.3667 17.4837 20.5083L17.5087 22.0917C17.5087 22.2334 17.617 22.3417 17.7587 22.3417L18.7587 22.325C18.992 22.325 19.1753 22.5084 19.1837 22.7334L19.2586 27.4834C19.267 27.95 18.892 28.3334 18.4253 28.3334H16.5087C13.4753 28.3334 11.667 26.525 11.667 23.4833V16.5084C11.667 13.475 13.4753 11.6667 16.5087 11.6667H23.492C26.5253 11.6667 28.3337 13.475 28.3337 16.5084V23.4917Z" fill="white"/>
            </svg>
          </a>
          <a href="#" class="">
            <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="40" height="40" rx="20" fill="#F8FAFC" fill-opacity="0.5"/>
            <path d="M28.3337 23.4917C28.3337 26.525 26.5253 28.3334 23.492 28.3334H22.5003C22.042 28.3334 21.667 27.9584 21.667 27.5V22.6917C21.667 22.4667 21.8503 22.275 22.0753 22.275L23.542 22.25C23.6587 22.2417 23.7587 22.1584 23.7837 22.0417L24.0753 20.45C24.1003 20.3 23.9837 20.1584 23.8253 20.1584L22.0503 20.1834C21.817 20.1834 21.6337 20 21.6253 19.775L21.592 17.7334C21.592 17.6 21.7003 17.4834 21.842 17.4834L23.842 17.45C23.9836 17.45 24.092 17.3417 24.092 17.2L24.0587 15.2C24.0587 15.0583 23.9503 14.95 23.8087 14.95L21.5587 14.9834C20.1753 15.0084 19.0753 16.1417 19.1003 17.525L19.142 19.8167C19.1503 20.05 18.967 20.2334 18.7337 20.2417L17.7337 20.2584C17.592 20.2584 17.4837 20.3667 17.4837 20.5083L17.5087 22.0917C17.5087 22.2334 17.617 22.3417 17.7587 22.3417L18.7587 22.325C18.992 22.325 19.1753 22.5084 19.1837 22.7334L19.2586 27.4834C19.267 27.95 18.892 28.3334 18.4253 28.3334H16.5087C13.4753 28.3334 11.667 26.525 11.667 23.4833V16.5084C11.667 13.475 13.4753 11.6667 16.5087 11.6667H23.492C26.5253 11.6667 28.3337 13.475 28.3337 16.5084V23.4917Z" fill="white"/>
            </svg>
          </a>
          <a href="#" class="">
            <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="40" height="40" rx="20" fill="#F8FAFC" fill-opacity="0.5"/>
            <path d="M26.375 12.5H13.625C13 12.5 12.5 13 12.5 13.5625V26.375C12.5 26.9375 13 27.4375 13.625 27.4375H26.375C27 27.4375 27.5 26.9375 27.5 26.375V13.5625C27.5 13 27 12.5 26.375 12.5ZM16.9375 25.25H14.75V18.125H16.9375V25.25ZM15.875 17.125C15.1875 17.125 14.5625 16.5625 14.5625 15.8125C14.5625 15.0625 15.125 14.5 15.875 14.5C16.5625 14.5 17.1875 15.0625 17.1875 15.8125C17.1875 16.5625 16.5625 17.125 15.875 17.125ZM25.3125 25.1875H23.125V21.6875C23.125 20.875 23.125 19.75 21.9375 19.75C20.75 19.75 20.625 20.6875 20.625 21.5625V25.125H18.4375V18.125H20.5V19.0625H20.5625C20.875 18.5 21.625 17.875 22.6875 17.875C24.9375 17.875 25.375 19.375 25.375 21.3125V25.1875H25.3125Z" fill="white"/>
            </svg>
          </a>
          <a href="#" class="">
            <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="40" height="40" rx="20" fill="#F8FAFC" fill-opacity="0.5"/>
            <path d="M24.167 13.3333H15.8337C13.3337 13.3333 11.667 15 11.667 17.5V22.5C11.667 25 13.3337 26.6666 15.8337 26.6666H24.167C26.667 26.6666 28.3337 25 28.3337 22.5V17.5C28.3337 15 26.667 13.3333 24.167 13.3333ZM21.5753 20.8583L19.517 22.0917C18.6836 22.5917 18.0003 22.2083 18.0003 21.2333V18.7583C18.0003 17.7833 18.6836 17.4 19.517 17.9L21.5753 19.1333C22.367 19.6166 22.367 20.3833 21.5753 20.8583Z" fill="white"/>
            </svg>
          </a>
        </div>

        
      </div>

      <!-- Right Section -->
      <div class="rounded-2xl md:w-3/5 bg-white p-8 md:p-12">
        <h2 class="text-2xl md:text-3xl font-medium mb-4">See Logistic Journey In Action</h2>
        <p class="text-[#343A40] mb-8 text-sm md:text-base">
          Get a personal walkthrough of Logistics journey with one of our product experts
        </p>

        <form v-if="!isLoading" class="custom-spacing" @submit.prevent="handleSubmit">
          <div v-if="formErrors.general" class="mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded">
            <ul>
              <li v-for="error in formErrors.general" :key="error">{{ error }}</li>
            </ul>
          </div>

          <div v-for="field in formFields" :key="field.name" class="grid md:grid-cols-1 gap-2">
            <label :for="field.name">{{ field.label }}</label>
            <textarea
              v-if="field.type === 'textarea'"
              :id="field.name"
              :placeholder="field.placeholder"
              :required="field.required"
              v-model="formData[field.name]"
              :class="[
                'w-full border rounded-md p-3 focus:ring-2 focus:ring-blue-500 outline-none',
                formErrors[field.name] ? 'border-red-500' : ''
              ]"
              :rows="field.rows || 4"
            ></textarea>
            <input
              v-else
              :id="field.name"
              :type="field.type === 'select' ? 'text' : field.type"
              :placeholder="field.placeholder"
              :required="field.required"
              v-model="formData[field.name]"
              :class="[
                'w-full border rounded-md p-3 focus:ring-2 focus:ring-blue-500 outline-none',
                formErrors[field.name] ? 'border-red-500' : ''
              ]"
            />
            <div v-if="formErrors[field.name]" class="text-red-600 text-sm">
              <ul>
                <li v-for="error in formErrors[field.name]" :key="error">{{ error }}</li>
              </ul>
            </div>
          </div>

          <p class="text-xs text-gray-500 leading-snug">
            By submitting your information, you agree to Logistic Journey’s Terms of Service and Privacy Policy. You can opt out anytime.
          </p>

          <button type="submit" :disabled="isSubmitting" class="solid-btn w-full md:w-auto disabled:opacity-50 disabled:cursor-not-allowed">
            {{ isSubmitting ? 'Submitting...' : 'Schedule a demo' }}
          </button>
        </form>
        <div v-else class="text-center">
          Loading form...
        </div>

        <!-- Success Popup -->
        <div v-if="showSuccessPopup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div class="bg-white p-8 rounded-lg shadow-lg max-w-md w-full mx-4">
            <h3 class="text-xl font-semibold mb-4 text-green-600">Success!</h3>
            <p class="text-gray-700 mb-6">{{ successMessage }}</p>
            <button @click="showSuccessPopup = false" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
              Close
            </button>
          </div>
        </div>
      </div>
      
      <div class="justify-center items-center flex md:hidden mt-8">
       <img class="" src="/public/images/demo.png" alt="">
      </div>
    </div>
  </section>

  <section class="highest-width py-16">
    <div class=" text-center px-6 md:px-12 space-y-5">
        <h2>Not ready for demo? Get access to free account</h2>
        <p>Email the team at <span class="underline">support@logisticjourney.com</span> to get access to Logistics Journey</p>
    </div>

    <div class="flex md:hidden text-center mt-12 justify-center items-center">   
      <div class="space-y-12"> 
        <div>
          <div class="flex justify-center items-center mb-6">
            <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect width="80" height="80" rx="40" fill="#E9EFFD"/>
              <path d="M38.5059 44.6229L35.6045 47.5243C34.9928 48.136 34.0205 48.136 33.3931 47.54C33.2206 47.3675 33.0481 47.2107 32.8756 47.0381C31.2602 45.4071 29.8017 43.6976 28.4999 41.9097C27.2139 40.1218 26.1788 38.3339 25.426 36.5617C24.6889 34.7738 24.3125 33.0643 24.3125 31.4332C24.3125 30.3668 24.5007 29.3473 24.8771 28.4063C25.2535 27.4497 25.8495 26.5714 26.6807 25.7872C27.6844 24.7992 28.7822 24.313 29.9428 24.313C30.3819 24.313 30.8211 24.4071 31.2132 24.5953C31.6209 24.7835 31.9816 25.0658 32.2639 25.4736L35.9025 30.602C36.1848 30.9941 36.3887 31.3548 36.5298 31.6998C36.671 32.0292 36.7494 32.3585 36.7494 32.6565C36.7494 33.0329 36.6396 33.4093 36.42 33.77C36.2162 34.1308 35.9182 34.5072 35.5418 34.8836L34.3498 36.1225C34.1773 36.2951 34.0989 36.4989 34.0989 36.7499C34.0989 36.8753 34.1146 36.9851 34.146 37.1106C34.193 37.2361 34.2401 37.3302 34.2714 37.4243C34.5537 37.9418 35.0399 38.6162 35.73 39.4317C36.4357 40.2473 37.1885 41.0785 38.004 41.9097C38.1609 42.0665 38.3334 42.2234 38.4902 42.3802C39.1176 42.9918 39.1332 43.9956 38.5059 44.6229Z" fill="#225AD6"/>
              <path d="M55.6327 49.9237C55.6327 50.3628 55.5543 50.8177 55.3975 51.2568C55.3504 51.3823 55.3034 51.5077 55.2406 51.6332C54.974 52.1978 54.629 52.731 54.1742 53.2329C53.4057 54.0798 52.5588 54.6914 51.6021 55.0835C51.5864 55.0835 51.5707 55.0992 51.555 55.0992C50.6297 55.4756 49.626 55.6795 48.5438 55.6795C46.9441 55.6795 45.2347 55.3031 43.4311 54.5346C41.6275 53.7661 39.8239 52.731 38.036 51.4293C37.4244 50.9745 36.8127 50.5197 36.2324 50.0335L41.3609 44.905C41.8 45.2344 42.1921 45.4853 42.5214 45.6578C42.5999 45.6892 42.694 45.7363 42.8037 45.7833C42.9292 45.8304 43.0547 45.846 43.1958 45.846C43.4624 45.846 43.6663 45.7519 43.8388 45.5794L45.0308 44.4032C45.4229 44.0111 45.7993 43.7131 46.16 43.5249C46.5207 43.3053 46.8814 43.1956 47.2735 43.1956C47.5715 43.1956 47.8851 43.2583 48.2302 43.3994C48.5752 43.5406 48.9359 43.7445 49.328 44.0111L54.5192 47.6967C54.927 47.979 55.2093 48.3083 55.3818 48.7004C55.5386 49.0925 55.6327 49.4846 55.6327 49.9237Z" fill="#225AD6"/>
            </svg>
          </div>
          <h2 class="mb-4">Phone Support</h2>
          <p class="mb-4">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in ero.</p>
          <span class="underline">+27 11 568 7109</span>     
       </div>

       <div>
          <div class="flex justify-center items-center mb-6">
            <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="80" height="80" rx="40" fill="#E9EFFD"/>
            <path d="M47.8375 26.6655H32.1542C27.4492 26.6655 24.3125 29.018 24.3125 34.5072V45.4855C24.3125 50.9747 27.4492 53.3272 32.1542 53.3272H47.8375C52.5425 53.3272 55.6792 50.9747 55.6792 45.4855V34.5072C55.6792 29.018 52.5425 26.6655 47.8375 26.6655ZM48.5746 36.2167L43.6657 40.1375C42.6306 40.9687 41.3132 41.3765 39.9958 41.3765C38.6784 41.3765 37.3454 40.9687 36.3259 40.1375L31.4171 36.2167C30.9152 35.8089 30.8368 35.0561 31.2288 34.5542C31.6366 34.0524 32.3737 33.9583 32.8756 34.366L37.7845 38.2869C38.9764 39.2436 40.9996 39.2436 42.1915 38.2869L47.1004 34.366C47.6023 33.9583 48.3551 34.0367 48.7471 34.5542C49.1549 35.0561 49.0765 35.8089 48.5746 36.2167Z" fill="#225AD6"/>
            </svg>
          </div>
          <h2 class="mb-4">Email Support</h2>
          <p class="mb-4">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in ero.</p>
          <span class="underline">support@logisticjourney.com</span>     
       </div>

       <div>
          <div class="flex justify-center items-center mb-6">
           <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="80" height="80" rx="40" fill="#E9EFFD"/>
            <path d="M53.5142 34.4287C51.8674 27.183 45.547 23.9209 39.9951 23.9209C39.9951 23.9209 39.9951 23.9209 39.9794 23.9209C34.4432 23.9209 28.1072 27.1673 26.4604 34.413C24.6255 42.5056 29.5814 49.3593 34.0668 53.6722C35.7293 55.2719 37.8622 56.0717 39.9951 56.0717C42.1281 56.0717 44.261 55.2719 45.9077 53.6722C50.3932 49.3593 55.3491 42.5213 53.5142 34.4287ZM39.9951 42.2861C37.2662 42.2861 35.0549 40.0747 35.0549 37.3458C35.0549 34.6169 37.2662 32.4056 39.9951 32.4056C42.724 32.4056 44.9354 34.6169 44.9354 37.3458C44.9354 40.0747 42.724 42.2861 39.9951 42.2861Z" fill="#225AD6"/>
            </svg>
          </div>
          <h2 class="mb-4">Physical Address</h2>
          <p class="mb-4">The Workshop, Unit 7
            70 Seventh Avenue
            Parktown North, Johannesburg
            Gauteng, South Africa
          </p> 
       </div>
      </div>
    </div>
  </section>
  <home-transform class="flex md:hidden"/>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import { useApi } from '~/composables/useApi'

const { getFormBySlug, submitForm } = useApi()

const formFields = ref([])
const formData = ref({})
const isLoading = ref(true)
const formErrors = ref({})
const isSubmitting = ref(false)
const showSuccessPopup = ref(false)
const successMessage = ref('')

// Fallback fields if API fails
const fallbackFields = [
  {
    name: 'first_name',
    type: 'text',
    label: 'First name',
    placeholder: 'Enter your first name',
    validation: ['required']
  },
  {
    name: 'last_name',
    type: 'text',
    label: 'Last name',
    placeholder: 'Enter your last name',
    validation: ['required']
  },
  {
    name: 'email',
    type: 'email',
    label: 'Work email',
    placeholder: 'Enter your email',
    validation: ['required', 'email']
  },
  {
    name: 'company',
    type: 'text',
    label: 'Company',
    placeholder: 'Enter your company',
    validation: ['required']
  },
  {
    name: 'company_size',
    type: 'text',
    label: 'Company size',
    placeholder: 'Enter company size',
    validation: ['required']
  },
  {
    name: 'phone',
    type: 'text',
    label: 'Phone number',
    placeholder: 'Enter phone number',
    validation: ['required']
  },
  {
    name: 'message',
    type: 'textarea',
    label: 'Message',
    placeholder: 'Enter your message',
    validation: []
  }
]

onMounted(async () => {
  try {
    const response = await getFormBySlug('demo-request')
    if (response && response.data && response.data.fields && response.data.fields.length > 0) {
      formFields.value = response.data.fields
    } else {
      formFields.value = fallbackFields
    }
  } catch (error) {
    console.error('Failed to fetch form:', error)
    formFields.value = fallbackFields
  } finally {
    // Initialize formData with empty values for each field to ensure proper v-model binding
    formData.value = formFields.value.reduce((acc, field) => {
      acc[field.name] = ''
      return acc
    }, {})
    isLoading.value = false
  }
})

const handleSubmit = async () => {
  isSubmitting.value = true
  formErrors.value = {}

  try {
    const response = await submitForm('demo-request', formData.value)
    // console.log('Form submitted successfully:', response)
    // Handle success (e.g., show success message, reset form)
    successMessage.value = 'Thank you for your request! We will get back to you soon.'
    showSuccessPopup.value = true
    // Reset formData to empty strings for each field
    formData.value = formFields.value.reduce((acc, field) => {
      acc[field.name] = ''
      return acc
    }, {})
  } catch (error) {
    console.error('Form submission failed:', error)
    if (error.response && error.response._data && error.response._data.errors) {
      // Map the errors to match the field names
      const mappedErrors = {}
      for (const [key, value] of Object.entries(error.response._data.errors)) {
        if (key === 'message') {
          // The 'message' key contains a summary, but we can ignore it or use it for general errors
          continue
        }
        mappedErrors[key] = value
      }
      formErrors.value = mappedErrors
    } else {
      formErrors.value = { general: ['An error occurred while submitting the form.'] }
    }
  } finally {
    isSubmitting.value = false
  }
}
</script>

<style scoped>
h2{
    font-weight: 500;
}
  label {
    color: #0F1621;
    font-weight: lighter;
  }

  input::placeholder {
    color: #94A3B7;
    font-weight: lighter;
  }

  input {
    border-color: #C0C2C4;
    font-weight: lighter;
  }

</style>
